---
title: "Introduction to Rmarkdown"
author: "Peter Higgins"
date: "11/18/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(medicaldata)
```

## R Markdown

Rmarkdown is an authoring framework for creating a variety of data-driven documents reproducibly with R. This e-book is itself a set of R Markdown documents, assembled with the {bookdown} package. RMarkdown is a simple formatting syntax that allows you to mix text and code to document data analysis, and author MS Word, MS Powerpoint, HTML, PDF, web dashboards, web apps, and poster documents. Rmarkdown documents are fully reproducible and support dozens of output formats. If your data changes, or you decide to change a part of your analysis, you can reproduce the entire (new version) of the document with a single click of the **Knit** button.

When you click the **Knit** button a document will be generated that includes both text content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this (which will run and produce output below. In this case, showing the contents of the covid_testing dataset.):

```{r medicaldata}
covid <- medicaldata::covid_testing
glimpse(covid)
```

The **Knit** button runs <br>
`render("file.Rmd", output = document-type)` <br>
for you

## Including Plots

You can also embed plots, for example:

```{r plot, echo=FALSE, warning=FALSE}
covid %>% 
  ggplot() +
  aes(x = pan_day, y = ct_result) +
  geom_point()
```

Note that the `echo = FALSE` parameter was added to the top of the `plot` code chunk to prevent printing of the R code that generated the plot.

## Other languages in code chunks

You can use a number of different open-source languages in addition to R if needed to do your data analysis, including SQL, shell code with Unix Bash, C, C++ via Rcpp, Stan, and D3.

## What Makes an Rmarkdown document?

An Rmarkdown document is a plain-text file with the *.Rmd file extension. It is composed of three types of content:

- The YAML header (at the top), surrounded at top and bottom by 3 dashes (---)
- Text narrative
- Code chunks, surrounded at top and bottom by 3 backticks (```), and a code language identifier in braces, like {r}
  + Note that the first code chunk is always named `setup` and is used to load libraries and set up document options.

This essentially provides an interface like a 'lab notebook' for data analysis. You can use code chunks to run the analysis, and text to document what you are doing in the analysis, how it worked, and interpret the results.

Code outputs, including tables and plots, are incorporated into the document.

You can choose to show or hide the code chunks in the final document with chunk options, like: 

`{r, echo = FALSE}` - runs code, but does not show it.<br>
or <br>
`{r, echo = TRUE}` - runs code and shows the code.

## How It Works

![rmarkdown processing from rstudio.com](images/rmarkdownflow.png)


Rmarkdown is an R-flavored version of the `markdown` language. This is a universal, open-source language for creating documents. Markdown documents end with the file extension `*.md.` An open-source program named `pandoc` converts *.md documents to output documents like MS Word, PDF, HTML, MS Powerpoint, etc.

When you click the **Knit** button or run the _render()_ function, R Markdown feeds the .Rmd file to knitr, which executes all of the code chunks and creates a new markdown (.md) document which includes the code and its output.

The markdown file generated by {knitr} is then processed by `pandoc` which is responsible for creating the finished format.

This may sound complicated, but R Markdown makes it extremely simple by encapsulating all of the above processing into a single _render()_ function (or the **Knitr** button).


